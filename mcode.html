<!DOCTYPE html>

<!-- Legal Footnote: This content is subject to copyright and should not be reproduced without permission. -->
<!-- Written and created by Thomas John-Michael de Beer, feel free to contact me via tjdebeer@gmail.com  -->

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>min.ide</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: black;
            color: #ffffff;
            overflow: hidden;
        }
#editor {
    width: 100vw;
    height: 100vh;
    padding: 20px;
    font-family: monospace;
    outline: none;
    white-space: pre;
    background-color: black;
    color: white;
    border: none;
    resize: none;
    box-sizing: border-box;
            font-size: 14px;
    line-height: 1.5;
    overflow-y: scroll;
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
    opacity: 69%;
}

        #editor::-webkit-scrollbar {
            width: 0;
            background: transparent;
        }
        textarea:focus {
            outline: none;
        }
        .button-container {
            position: fixed;
            right: 20px;
            top: 20px;
            z-index: 10;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        .fixed-button {
            border: none;
            background: transparent;
            color: white;
            cursor: pointer;
            padding: 8px;
            font-size: 22px;
            opacity: 0.8;
            transition: opacity 0.2s;
        }
        .fixed-button:hover {
            opacity: 1;
        }
        input[type="file"] {
            display: none;
        }
        #cursorPosition {
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            top: 20px;
            color: white;
            font-size: 14px;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 10px;
            border-radius: 5px;
        }


#footer {
    position: fixed;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.8);
    color: white;
    font-size: 11px;
    padding: 10px 20px;
    border-radius: 5px;
    box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.5);
    z-index: 10;
            opacity: 0.2;
margin: auto;
margin-bottom: 11px;
}


    </style>
</head>
<body>


    <div class="button-container">
        <button id="saveBtn" class="fixed-button" title="Download File">
            &#x1F4BE;
        </button>

        <button id="openBtn" class="fixed-button" title="Open File">
            &#x1F4C2;
        </button>

        <button id="selectAllBtn" class="fixed-button" title="Select All">
            &#x1F5D2;
        </button>

        <button id="undoBtn" class="fixed-button" title="Undo">
            &#x25C0;
        </button>

        <button id="redoBtn" class="fixed-button" title="Redo">
            &#x25B6;
        </button>

        <button id="runCodeBtn" class="fixed-button" title="Run Code">
        &#x1F680;
        </button>

<button id="githubBtn" class="fixed-button" title="Open GitHub" onclick="window.open('https://thomasdebeer.online/gitpush2', '_blank')">
    <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" stroke-width="1.5" class="h-6 w-6" viewBox="0 0 24 24" fill="#ffffff">
        <title>GitHub</title>
        <path fill-rule="evenodd" clip-rule="evenodd"
            d="M12 0C5.372 0 0 5.372 0 12c0 5.303 3.438 9.8 8.205 11.387.6.111.82-.261.82-.577 
            0-.285-.011-1.04-.017-2.04-3.338.726-4.042-1.61-4.042-1.61-.546-1.387-1.333-1.757-1.333-1.757-1.09-.745.083-.73.083-.73 
            1.205.084 1.84 1.236 1.84 1.236 1.07 1.834 2.807 1.304 3.492.997.108-.775.42-1.304.763-1.604-2.665-.304-5.467-1.332-5.467-5.931 
            0-1.31.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23a11.52 11.52 0 0 1 3.004-.404c1.02.005 
            2.048.138 3.003.404 2.291-1.552 3.297-1.23 3.297-1.23.654 1.653.243 2.874.12 3.176.77.84 1.235 1.911 
            1.235 3.221 0 4.61-2.807 5.625-5.48 5.921.43.372.823 1.103.823 2.222 0 1.604-.015 2.896-.015 3.286 
            0 .319.216.694.825.576C20.565 21.796 24 17.299 24 12c0-6.628-5.373-12-12-12z" />
    </svg>
</button>

<button id="selectSectionBtn" class="fixed-button" title="Select Section">
    &#x2702;
</button>



    </div>

    <textarea id="editor" placeholder=">_"></textarea>
    
    <input type="file" id="fileInput" accept=".html, .txt, .json, .js, .css" />

    <div id="cursorPosition">
        1 : 1
    </div>

<div id="footer">
    Created by Thomas de Beer
</div>




    <script>
        let editor = document.getElementById('editor');
        let undoStack = [];
        let redoStack = [];
        const MAX_HISTORY = 11;

        window.onload = function() {
            const savedContent = localStorage.getItem('editorContent');
            if (savedContent) {
                editor.value = savedContent;
                saveState();
            }
        };

        function saveToLocalStorage() {
            localStorage.setItem('editorContent', editor.value);
        }

        function saveState() {
            undoStack.push(editor.value);
            if (undoStack.length > MAX_HISTORY) {
                undoStack.shift();
            }
            redoStack = [];
            saveToLocalStorage();
        }

        editor.addEventListener('input', saveState);

        document.getElementById('saveBtn').addEventListener('click', function() {
            const text = editor.value;
            const filename = prompt("SAVE AS:", "index.html");

            if (filename) {
                const blob = new Blob([text], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.click();

                URL.revokeObjectURL(url);
            }
        });

        document.getElementById('openBtn').addEventListener('click', function() {
            document.getElementById('fileInput').click();
        });

        document.getElementById('fileInput').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    editor.value = e.target.result;
                    saveState();
                };
                reader.readAsText(file);
            }
        });

        document.getElementById('selectAllBtn').addEventListener('click', function() {
            editor.select();
        });

        document.getElementById('undoBtn').addEventListener('click', function() {
            if (undoStack.length > 1) {
                redoStack.push(undoStack.pop());
                editor.value = undoStack[undoStack.length - 1];
                saveToLocalStorage();
            }
        });

        document.getElementById('redoBtn').addEventListener('click', function() {
            if (redoStack.length > 0) {
                undoStack.push(redoStack.pop());
                editor.value = undoStack[undoStack.length - 1];
                saveToLocalStorage();
            }
        });

        document.getElementById('runCodeBtn').addEventListener('click', function() {
            let code = editor.value;

            const logscriptjs = 'PHNjcmlwdD4KICAgIChmdW5jdGlvbigpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBjb25zb2xlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgIGNvbnNvbGVEaXYuaWQgPSAiY29uc29sZSI7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29uc29sZURpdik7CgogICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbnNvbGVEaXYuc3R5bGUsIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAiZml4ZWQiLAogICAgICAgICAgICAgICAgYm90dG9tOiAiMCIsCiAgICAgICAgICAgICAgICBsZWZ0OiAiMCIsCiAgICAgICAgICAgICAgICB3aWR0aDogIjEwMCUiLAogICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiAiMjAwcHgiLAogICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAic2Nyb2xsIiwKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNCkiLAogICAgICAgICAgICAgICAgY29sb3I6ICJibGFjayIsCiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAibW9ub3NwYWNlIiwKICAgICAgICAgICAgICAgIHBhZGRpbmc6ICIxMHB4IiwKICAgICAgICAgICAgICAgIHpJbmRleDogIjk5OTk5OTk5IiwKICAgICAgICAgICAgICAgIHdvcmRCcmVhazogImJyZWFrLXdvcmQiLAogICAgICAgICAgICAgICAgb3ZlcmZsb3dXcmFwOiAiYnJlYWstd29yZCIsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZnVuY3Rpb24gbG9nVG9TY3JlZW4odHlwZSwgYXJncykgewogICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICAgICAgbWVzc2FnZS50ZXh0Q29udGVudCA9IGAke3R5cGV9OiAke0FycmF5LmZyb20oYXJncykuam9pbigiICIpfWA7CiAgICAgICAgICAgICAgICBjb25zb2xlRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2UpOwogICAgICAgICAgICAgICAgY29uc29sZURpdi5zY3JvbGxUb3AgPSBjb25zb2xlRGl2LnNjcm9sbEhlaWdodDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgWydsb2cnLCAnd2FybicsICdlcnJvciddLmZvckVhY2goKG1ldGhvZCkgPT4gewogICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSBjb25zb2xlW21ldGhvZF07CiAgICAgICAgICAgICAgICBjb25zb2xlW21ldGhvZF0gPSBmdW5jdGlvbiguLi5hcmdzKSB7CiAgICAgICAgICAgICAgICAgICAgbG9nVG9TY3JlZW4obWV0aG9kLCBhcmdzKTsKICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbC5hcHBseShjb25zb2xlLCBhcmdzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgd2luZG93Lm9uZXJyb3IgPSBmdW5jdGlvbihtZXNzYWdlLCBzb3VyY2UsIGxpbmVubywgY29sbm8sIGVycm9yKSB7CiAgICAgICAgICAgICAgICBsb2dUb1NjcmVlbigiVW5jYXVnaHQgRXJyb3IiLCBbbWVzc2FnZSwgYGF0ICR7c291cmNlfToke2xpbmVub306JHtjb2xub31gXSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidW5oYW5kbGVkcmVqZWN0aW9uIiwgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgICAgIGxvZ1RvU2NyZWVuKCJVbmhhbmRsZWQgUHJvbWlzZSBSZWplY3Rpb24iLCBbZXZlbnQucmVhc29uXSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZnVuY3Rpb24gY29weVRvQ2xpcGJvYXJkKHRleHQpIHsKICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkICYmIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDb3B5Q29uZmlybWF0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBmYWxsYmFja0NvcHlUZXh0KHRleHQpOyAgLy8gTm8gd2FybmluZyBmb3IgZmFsbGJhY2sKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2tDb3B5VGV4dCh0ZXh0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZmFsbGJhY2tDb3B5VGV4dCh0ZXh0KSB7CiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRleHRhcmVhIik7CiAgICAgICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9IHRleHQ7CiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5zdHlsZS5vcGFjaXR5ID0gIjAiOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7CiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5zZWxlY3QoKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoImNvcHkiKTsKICAgICAgICAgICAgICAgICAgICBzaG93Q29weUNvbmZpcm1hdGlvbigpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRmFsbGJhY2s6IENvcHlpbmcgdGV4dCBmYWlsZWQiLCBlcnIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0YXJlYSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dDb3B5Q29uZmlybWF0aW9uKCkgewogICAgICAgICAgICAgICAgY29uc3QgY29weU1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgICAgIGNvcHlNZXNzYWdlLnRleHRDb250ZW50ID0gIkNvcGllZCB0byBjbGlwYm9hcmQhIjsKICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29weU1lc3NhZ2Uuc3R5bGUsIHsKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogImZpeGVkIiwKICAgICAgICAgICAgICAgICAgICB0b3A6ICI1MCUiLAogICAgICAgICAgICAgICAgICAgIGxlZnQ6ICI1MCUiLAogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogInRyYW5zbGF0ZSgtNTAlLCAtNTAlKSIsCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAicmdiYSgwLCAwLCAwLCAwLjcpIiwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogIndoaXRlIiwKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAiMTBweCIsCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAiNXB4IiwKICAgICAgICAgICAgICAgICAgICB6SW5kZXg6ICI5OTk5OTk5OSIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29weU1lc3NhZ2UpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjb3B5TWVzc2FnZS5yZW1vdmUoKSwgMjAwMCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnNvbGVEaXYuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dFRvQ29weSA9IGNvbnNvbGVEaXYuaW5uZXJUZXh0IHx8IGNvbnNvbGVEaXYudGV4dENvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgY29weVRvQ2xpcGJvYXJkKHRleHRUb0NvcHkpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgZHVyaW5nIGNsaWNrIGhhbmRsZXI6ICIsIGVycik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJBbiBlcnJvciBvY2N1cnJlZCBpbiB0aGUgc2NyaXB0OiAiLCBlcnIpOwogICAgICAgIH0KICAgIH0pKCk7Cjwvc2NyaXB0Pgo=';

            let logjs = atob(logscriptjs);

            const scriptTagIndex = code.indexOf('<script>');

            if (scriptTagIndex !== -1) {
                const beforeScript = code.slice(0, scriptTagIndex);
                const afterScript = code.slice(scriptTagIndex);
                code = beforeScript + logjs + afterScript;
            }

            const newTab = window.open();
            newTab.document.write(code);
            newTab.document.close();
        });

        setInterval(saveToLocalStorage, 5000);

        editor.addEventListener('input', updateCaretPosition);
        editor.addEventListener('click', updateCaretPosition);
        editor.addEventListener('keydown', updateCaretPosition);

        function updateCaretPosition() {
            const cursorPosition = editor.selectionStart;
            const text = editor.value.substring(0, cursorPosition);

            const scriptTagStart = text.indexOf("<script>");
            
            if (scriptTagStart !== -1) {
                const adjustedText = text.substring(scriptTagStart + 8);
                const lines = adjustedText.split("\n");
                const lineNumber = lines.length;
                const charPosition = lines[lines.length - 1].length + 1;

                const positionDisplay = document.getElementById('cursorPosition');
                positionDisplay.textContent = `${lineNumber} : ${charPosition}`;
            } else {
                const lines = text.split("\n");
                const lineNumber = lines.length;
                const charPosition = lines[lines.length - 1].length + 1;

                const positionDisplay = document.getElementById('cursorPosition');
                positionDisplay.textContent = `${lineNumber} : ${charPosition}`;
            }
        }

let selectingSection = false;
let startSelectionIndex = null;

document.getElementById('selectSectionBtn').addEventListener('click', function() {
    selectingSection = true;
    startSelectionIndex = null;
});

editor.addEventListener('click', function(event) {
    if (!selectingSection) return;

    const cursorPosition = editor.selectionStart;

    if (startSelectionIndex === null) {
        startSelectionIndex = cursorPosition;
    } else {
        const endSelectionIndex = cursorPosition;
        const start = Math.min(startSelectionIndex, endSelectionIndex);
        const end = Math.max(startSelectionIndex, endSelectionIndex);
        editor.setSelectionRange(start, end);
        editor.focus();
        selectingSection = false;
    }
});



    </script>

</body>
</html>
